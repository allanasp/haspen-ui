// DKFDS Mixins
// Complete mixin library from Det FÃ¦lles Designsystem

@use 'sass:map';
@use '../core/breakpoints' as *;
@use '../core/typography' as type;
@use '../core/colors' as colors;
@use '../functions' as func;

// Typography Mixins
@mixin h1 {
  font-size: type.$h1-font-size;
  font-weight: type.$font-weight-bold;
  line-height: type.$line-height-heading;

  @include media-breakpoint-up(md) {
    font-size: type.$h1-font-size-md;
  }
  @include media-breakpoint-up(lg) {
    font-size: type.$h1-font-size-lg;
  }
  @include media-breakpoint-up(xl) {
    font-size: type.$h1-font-size-xl;
  }
}

@mixin h2 {
  font-size: type.$h2-font-size;
  font-weight: type.$font-weight-bold;
  line-height: type.$line-height-heading;

  @include media-breakpoint-up(md) {
    font-size: type.$h2-font-size-md;
  }
  @include media-breakpoint-up(lg) {
    font-size: type.$h2-font-size-lg;
  }
}

@mixin h3 {
  font-size: type.$h3-font-size;
  font-weight: type.$font-weight-bold;
  line-height: type.$line-height-heading;

  @include media-breakpoint-up(md) {
    font-size: type.$h3-font-size-md;
  }
  @include media-breakpoint-up(lg) {
    font-size: type.$h3-font-size-lg;
  }
}

@mixin h4 {
  font-size: type.$h4-font-size;
  font-weight: type.$font-weight-semibold;
  line-height: type.$line-height-heading;

  @include media-breakpoint-up(md) {
    font-size: type.$h4-font-size-md;
  }
}

@mixin h5 {
  font-size: type.$h5-font-size;
  font-weight: type.$font-weight-semibold;
  line-height: type.$line-height-heading;

  @include media-breakpoint-up(md) {
    font-size: type.$h5-font-size-md;
  }
}

@mixin h6 {
  font-size: type.$h6-font-size;
  font-weight: type.$font-weight-semibold;
  line-height: type.$line-height-heading;

  @include media-breakpoint-up(md) {
    font-size: type.$h6-font-size-md;
  }
}

// Body text mixins
@mixin body-copy-text {
  font-size: type.$font-size-base;
  line-height: type.$line-height-base;
}

@mixin small-text {
  font-size: type.$font-size-small;
  line-height: type.$line-height-base;
}

@mixin lead-text {
  font-size: type.$font-size-lead;
  line-height: type.$line-height-base;
  font-weight: type.$font-weight-normal;
}

// Form typography
@mixin form-label-text {
  font-size: type.$font-size-form-label;
  font-weight: type.$font-weight-semibold;
  line-height: type.$line-height-base;
}

@mixin form-hint-text {
  font-size: type.$font-size-form-hint;
  line-height: type.$line-height-base;
  color: func.color('ink-light');
}

@mixin form-error-text {
  font-size: type.$font-size-form-error;
  line-height: type.$line-height-base;
  color: func.color('error');
  font-weight: type.$font-weight-semibold;
}

// Focus styles
@mixin focus {
  outline: 3px solid func.color('focus');
  outline-offset: 1px;
}

@mixin focus-reset {
  outline: none;
  outline-offset: 0;
}

// Button mixins
@mixin button-base {
  display: inline-block;
  font-family: type.$font-family-primary;
  font-size: type.$font-size-button;
  font-weight: type.$font-weight-medium;
  line-height: type.$line-height-base;
  text-align: center;
  text-decoration: none;
  vertical-align: middle;
  cursor: pointer;
  user-select: none;
  border: 2px solid transparent;
  padding: func.units(2) func.units(4);
  border-radius: func.radius('default');
  transition: all 0.2s ease-in-out;

  &:focus {
    @include focus;
  }

  &:disabled,
  &.disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
}

@mixin button-primary {
  @include button-base;
  background-color: func.color('primary');
  border-color: func.color('primary');
  color: func.color('white');

  &:hover:not(:disabled) {
    background-color: func.color('primary-dark');
    border-color: func.color('primary-dark');
  }

  &:active:not(:disabled) {
    background-color: func.color('primary-darker');
    border-color: func.color('primary-darker');
  }
}

@mixin button-secondary {
  @include button-base;
  background-color: func.color('white');
  border-color: func.color('primary');
  color: func.color('primary');

  &:hover:not(:disabled) {
    background-color: func.color('gray-100');
  }

  &:active:not(:disabled) {
    background-color: func.color('gray-200');
  }
}

// Layout mixins
@mixin container {
  width: 100%;
  padding-right: func.gutter();
  padding-left: func.gutter();
  margin-right: auto;
  margin-left: auto;

  @include media-breakpoint-up(sm) {
    max-width: func.container-width('sm');
  }

  @include media-breakpoint-up(md) {
    max-width: func.container-width('md');
  }

  @include media-breakpoint-up(lg) {
    max-width: func.container-width('lg');
  }

  @include media-breakpoint-up(xl) {
    max-width: func.container-width('xl');
  }
}

@mixin grid-row {
  display: flex;
  flex-wrap: wrap;
  margin-right: calc(func.gutter() / -2);
  margin-left: calc(func.gutter() / -2);
}

@mixin grid-col($size: false, $columns: 12) {
  position: relative;
  width: 100%;
  padding-right: calc(func.gutter() / 2);
  padding-left: calc(func.gutter() / 2);

  @if $size {
    flex: 0 0 percentage($size / $columns);
    max-width: percentage($size / $columns);
  }
}

// Utility mixins
@mixin sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

@mixin sr-only-focusable {
  &:active,
  &:focus {
    position: static !important;
    width: auto !important;
    height: auto !important;
    overflow: visible !important;
    clip: auto !important;
    white-space: normal !important;
  }
}

@mixin clearfix {
  &::after {
    display: block;
    clear: both;
    content: '';
  }
}

@mixin unstyled-list {
  padding-left: 0;
  list-style: none;
}

// State mixins
@mixin hover {
  &:hover {
    @content;
  }
}

@mixin hover-focus {
  &:hover,
  &:focus {
    @content;
  }
}

@mixin plain-hover-focus {
  &,
  &:hover,
  &:focus {
    @content;
  }
}

@mixin hover-focus-active {
  &:hover,
  &:focus,
  &:active {
    @content;
  }
}

// Truncate text
@mixin text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// Aspect ratio
@mixin aspect-ratio($width, $height) {
  position: relative;

  &::before {
    display: block;
    content: '';
    width: 100%;
    padding-top: percentage($height / $width);
  }

  > * {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }
}

// Print styles
@mixin print-only {
  @media print {
    @content;
  }
}

@mixin screen-only {
  @media screen {
    @content;
  }
}
