// Container Queries Utilities
// Modern responsive design based on container size instead of viewport size

// Container type utilities
.haspen-container {
  container-type: inline-size;
}

.haspen-container-normal {
  container-type: normal;
}

.haspen-container-size {
  container-type: size;
}

// Named containers
.haspen-container-card {
  container-name: card;
  container-type: inline-size;
}

.haspen-container-sidebar {
  container-name: sidebar;
  container-type: inline-size;
}

.haspen-container-main {
  container-name: main;
  container-type: inline-size;
}

.haspen-container-modal {
  container-name: modal;
  container-type: inline-size;
}

// Container query breakpoints
// Using similar sizes to viewport breakpoints but for containers
$container-breakpoints: (
  sm: 24rem,  // 384px
  md: 32rem,  // 512px  
  lg: 48rem,  // 768px
  xl: 64rem,  // 1024px
  2xl: 80rem  // 1280px
);

// Display utilities with container queries
@container (min-width: 24rem) {
  .haspen-cq-sm\:block { display: block; }
  .haspen-cq-sm\:inline-block { display: inline-block; }
  .haspen-cq-sm\:inline { display: inline; }
  .haspen-cq-sm\:flex { display: flex; }
  .haspen-cq-sm\:inline-flex { display: inline-flex; }
  .haspen-cq-sm\:grid { display: grid; }
  .haspen-cq-sm\:inline-grid { display: inline-grid; }
  .haspen-cq-sm\:hidden { display: none; }
}

@container (min-width: 32rem) {
  .haspen-cq-md\:block { display: block; }
  .haspen-cq-md\:inline-block { display: inline-block; }
  .haspen-cq-md\:inline { display: inline; }
  .haspen-cq-md\:flex { display: flex; }
  .haspen-cq-md\:inline-flex { display: inline-flex; }
  .haspen-cq-md\:grid { display: grid; }
  .haspen-cq-md\:inline-grid { display: inline-grid; }
  .haspen-cq-md\:hidden { display: none; }
}

@container (min-width: 48rem) {
  .haspen-cq-lg\:block { display: block; }
  .haspen-cq-lg\:inline-block { display: inline-block; }
  .haspen-cq-lg\:inline { display: inline; }
  .haspen-cq-lg\:flex { display: flex; }
  .haspen-cq-lg\:inline-flex { display: inline-flex; }
  .haspen-cq-lg\:grid { display: grid; }
  .haspen-cq-lg\:inline-grid { display: inline-grid; }
  .haspen-cq-lg\:hidden { display: none; }
}

@container (min-width: 64rem) {
  .haspen-cq-xl\:block { display: block; }
  .haspen-cq-xl\:inline-block { display: inline-block; }
  .haspen-cq-xl\:inline { display: inline; }
  .haspen-cq-xl\:flex { display: flex; }
  .haspen-cq-xl\:inline-flex { display: inline-flex; }
  .haspen-cq-xl\:grid { display: grid; }
  .haspen-cq-xl\:inline-grid { display: inline-grid; }
  .haspen-cq-xl\:hidden { display: none; }
}

// Grid utilities with container queries
@container (min-width: 24rem) {
  .haspen-cq-sm\:grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
  .haspen-cq-sm\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .haspen-cq-sm\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  .haspen-cq-sm\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
  .haspen-cq-sm\:grid-cols-6 { grid-template-columns: repeat(6, minmax(0, 1fr)); }
  .haspen-cq-sm\:grid-cols-12 { grid-template-columns: repeat(12, minmax(0, 1fr)); }
}

@container (min-width: 32rem) {
  .haspen-cq-md\:grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
  .haspen-cq-md\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .haspen-cq-md\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  .haspen-cq-md\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
  .haspen-cq-md\:grid-cols-6 { grid-template-columns: repeat(6, minmax(0, 1fr)); }
  .haspen-cq-md\:grid-cols-12 { grid-template-columns: repeat(12, minmax(0, 1fr)); }
}

@container (min-width: 48rem) {
  .haspen-cq-lg\:grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
  .haspen-cq-lg\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .haspen-cq-lg\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  .haspen-cq-lg\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
  .haspen-cq-lg\:grid-cols-6 { grid-template-columns: repeat(6, minmax(0, 1fr)); }
  .haspen-cq-lg\:grid-cols-12 { grid-template-columns: repeat(12, minmax(0, 1fr)); }
}

// Flexbox utilities with container queries
@container (min-width: 24rem) {
  .haspen-cq-sm\:flex-row { flex-direction: row; }
  .haspen-cq-sm\:flex-col { flex-direction: column; }
  .haspen-cq-sm\:flex-wrap { flex-wrap: wrap; }
  .haspen-cq-sm\:flex-nowrap { flex-wrap: nowrap; }
  .haspen-cq-sm\:justify-start { justify-content: flex-start; }
  .haspen-cq-sm\:justify-center { justify-content: center; }
  .haspen-cq-sm\:justify-end { justify-content: flex-end; }
  .haspen-cq-sm\:justify-between { justify-content: space-between; }
  .haspen-cq-sm\:items-start { align-items: flex-start; }
  .haspen-cq-sm\:items-center { align-items: center; }
  .haspen-cq-sm\:items-end { align-items: flex-end; }
}

@container (min-width: 32rem) {
  .haspen-cq-md\:flex-row { flex-direction: row; }
  .haspen-cq-md\:flex-col { flex-direction: column; }
  .haspen-cq-md\:flex-wrap { flex-wrap: wrap; }
  .haspen-cq-md\:flex-nowrap { flex-wrap: nowrap; }
  .haspen-cq-md\:justify-start { justify-content: flex-start; }
  .haspen-cq-md\:justify-center { justify-content: center; }
  .haspen-cq-md\:justify-end { justify-content: flex-end; }
  .haspen-cq-md\:justify-between { justify-content: space-between; }
  .haspen-cq-md\:items-start { align-items: flex-start; }
  .haspen-cq-md\:items-center { align-items: center; }
  .haspen-cq-md\:items-end { align-items: flex-end; }
}

@container (min-width: 48rem) {
  .haspen-cq-lg\:flex-row { flex-direction: row; }
  .haspen-cq-lg\:flex-col { flex-direction: column; }
  .haspen-cq-lg\:flex-wrap { flex-wrap: wrap; }
  .haspen-cq-lg\:flex-nowrap { flex-wrap: nowrap; }
  .haspen-cq-lg\:justify-start { justify-content: flex-start; }
  .haspen-cq-lg\:justify-center { justify-content: center; }
  .haspen-cq-lg\:justify-end { justify-content: flex-end; }
  .haspen-cq-lg\:justify-between { justify-content: space-between; }
  .haspen-cq-lg\:items-start { align-items: flex-start; }
  .haspen-cq-lg\:items-center { align-items: center; }
  .haspen-cq-lg\:items-end { align-items: flex-end; }
}

// Spacing utilities with container queries
@container (min-width: 24rem) {
  .haspen-cq-sm\:p-0 { padding: 0; }
  .haspen-cq-sm\:p-2 { padding: var(--haspen-space-sm); }
  .haspen-cq-sm\:p-4 { padding: var(--haspen-space-md); }
  .haspen-cq-sm\:p-6 { padding: var(--haspen-space-lg); }
  .haspen-cq-sm\:p-8 { padding: var(--haspen-space-xl); }
  
  .haspen-cq-sm\:m-0 { margin: 0; }
  .haspen-cq-sm\:m-2 { margin: var(--haspen-space-sm); }
  .haspen-cq-sm\:m-4 { margin: var(--haspen-space-md); }
  .haspen-cq-sm\:m-6 { margin: var(--haspen-space-lg); }
  .haspen-cq-sm\:m-8 { margin: var(--haspen-space-xl); }
}

@container (min-width: 32rem) {
  .haspen-cq-md\:p-0 { padding: 0; }
  .haspen-cq-md\:p-2 { padding: var(--haspen-space-sm); }
  .haspen-cq-md\:p-4 { padding: var(--haspen-space-md); }
  .haspen-cq-md\:p-6 { padding: var(--haspen-space-lg); }
  .haspen-cq-md\:p-8 { padding: var(--haspen-space-xl); }
  .haspen-cq-md\:p-10 { padding: var(--haspen-space-2xl); }
  
  .haspen-cq-md\:m-0 { margin: 0; }
  .haspen-cq-md\:m-2 { margin: var(--haspen-space-sm); }
  .haspen-cq-md\:m-4 { margin: var(--haspen-space-md); }
  .haspen-cq-md\:m-6 { margin: var(--haspen-space-lg); }
  .haspen-cq-md\:m-8 { margin: var(--haspen-space-xl); }
}

@container (min-width: 48rem) {
  .haspen-cq-lg\:p-0 { padding: 0; }
  .haspen-cq-lg\:p-4 { padding: var(--haspen-space-md); }
  .haspen-cq-lg\:p-6 { padding: var(--haspen-space-lg); }
  .haspen-cq-lg\:p-8 { padding: var(--haspen-space-xl); }
  .haspen-cq-lg\:p-12 { padding: var(--haspen-space-3xl); }
  
  .haspen-cq-lg\:m-0 { margin: 0; }
  .haspen-cq-lg\:m-4 { margin: var(--haspen-space-md); }
  .haspen-cq-lg\:m-6 { margin: var(--haspen-space-lg); }
  .haspen-cq-lg\:m-8 { margin: var(--haspen-space-xl); }
  .haspen-cq-lg\:m-12 { margin: var(--haspen-space-3xl); }
}

// Text utilities with container queries
@container (min-width: 24rem) {
  .haspen-cq-sm\:text-xs { font-size: var(--haspen-font-size-xs); }
  .haspen-cq-sm\:text-sm { font-size: var(--haspen-font-size-sm); }
  .haspen-cq-sm\:text-base { font-size: var(--haspen-font-size-base); }
  .haspen-cq-sm\:text-lg { font-size: var(--haspen-font-size-lg); }
  .haspen-cq-sm\:text-xl { font-size: var(--haspen-font-size-xl); }
}

@container (min-width: 32rem) {
  .haspen-cq-md\:text-sm { font-size: var(--haspen-font-size-sm); }
  .haspen-cq-md\:text-base { font-size: var(--haspen-font-size-base); }
  .haspen-cq-md\:text-lg { font-size: var(--haspen-font-size-lg); }
  .haspen-cq-md\:text-xl { font-size: var(--haspen-font-size-xl); }
  .haspen-cq-md\:text-2xl { font-size: var(--haspen-font-size-2xl); }
}

@container (min-width: 48rem) {
  .haspen-cq-lg\:text-base { font-size: var(--haspen-font-size-base); }
  .haspen-cq-lg\:text-lg { font-size: var(--haspen-font-size-lg); }
  .haspen-cq-lg\:text-xl { font-size: var(--haspen-font-size-xl); }
  .haspen-cq-lg\:text-2xl { font-size: var(--haspen-font-size-2xl); }
  .haspen-cq-lg\:text-3xl { font-size: var(--haspen-font-size-3xl); }
}

// Component patterns using container queries
.haspen-card-container {
  container-type: inline-size;
  
  .card {
    padding: var(--haspen-space-md);
    
    @container (min-width: 20rem) {
      padding: var(--haspen-space-lg);
    }
    
    @container (min-width: 30rem) {
      padding: var(--haspen-space-xl);
    }
  }
  
  .card-title {
    font-size: var(--haspen-font-size-lg);
    
    @container (min-width: 25rem) {
      font-size: var(--haspen-font-size-xl);
    }
    
    @container (min-width: 40rem) {
      font-size: var(--haspen-font-size-2xl);
    }
  }
}

// Responsive component patterns
.haspen-responsive-card {
  container-type: inline-size;
  
  .card-content {
    display: flex;
    flex-direction: column;
    gap: var(--haspen-space-md);
    
    @container (min-width: 30rem) {
      flex-direction: row;
      gap: var(--haspen-space-lg);
    }
  }
  
  .card-image {
    width: 100%;
    height: 200px;
    
    @container (min-width: 30rem) {
      width: 150px;
      height: 150px;
    }
    
    @container (min-width: 45rem) {
      width: 200px;
      height: 200px;
    }
  }
}

// Named container patterns
@container card (min-width: 20rem) {
  .card-compact {
    padding: var(--haspen-space-sm);
    font-size: var(--haspen-font-size-sm);
  }
}

@container card (min-width: 30rem) {
  .card-normal {
    padding: var(--haspen-space-md);
    font-size: var(--haspen-font-size-base);
  }
}

@container card (min-width: 40rem) {
  .card-spacious {
    padding: var(--haspen-space-lg);
    font-size: var(--haspen-font-size-lg);
  }
}

// Sidebar responsive patterns
@container sidebar (max-width: 15rem) {
  .sidebar-collapsed {
    .sidebar-text { display: none; }
    .sidebar-icon { margin: 0 auto; }
  }
}

@container sidebar (min-width: 15rem) {
  .sidebar-expanded {
    .sidebar-text { display: inline; }
    .sidebar-icon { margin-right: var(--haspen-space-sm); }
  }
}

// Browser support fallback
@supports not (container-type: inline-size) {
  .haspen-container-fallback {
    /* Fallback styles for browsers without container query support */
    .haspen-cq-sm\:hidden,
    .haspen-cq-md\:hidden,
    .haspen-cq-lg\:hidden {
      display: none !important;
    }
  }
}